{"id":"Jg52","dependencies":[{"name":"/Users/erik/webdev/temp/jigsaw-puzzle/package.json","includedInParent":true,"mtime":1607410169015},{"name":"./share-connections.js","loc":{"line":1,"column":33},"parent":"/Users/erik/webdev/temp/jigsaw-puzzle/src/lib/snap.js","resolved":"/Users/erik/webdev/temp/jigsaw-puzzle/src/lib/share-connections.js"},{"name":"./is-close.js","loc":{"line":2,"column":24},"parent":"/Users/erik/webdev/temp/jigsaw-puzzle/src/lib/snap.js","resolved":"/Users/erik/webdev/temp/jigsaw-puzzle/src/lib/is-close.js"},{"name":"./../utils/object-helpers.js","loc":{"line":3,"column":21},"parent":"/Users/erik/webdev/temp/jigsaw-puzzle/src/lib/snap.js","resolved":"/Users/erik/webdev/temp/jigsaw-puzzle/src/utils/object-helpers.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.snap=void 0;var r=require(\"./share-connections.js\"),e=require(\"./is-close.js\"),t=require(\"./../utils/object-helpers.js\");function n(r,e){return f(r)||o(r,e)||u(r,e)||c()}function o(r,e){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(r)){var t=[],n=!0,o=!1,i=void 0;try{for(var c,u=r[Symbol.iterator]();!(n=(c=u.next()).done)&&(t.push(c.value),!e||t.length!==e);n=!0);}catch(s){o=!0,i=s}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return t}}function i(r){return f(r)||a(r)||u(r)||c()}function c(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function u(r,e){if(r){if(\"string\"==typeof r)return s(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return\"Object\"===t&&r.constructor&&(t=r.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(r):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(r,e):void 0}}function s(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function a(r){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}function f(r){if(Array.isArray(r))return r}var l=function(r,e,n){i(e).slice(0).forEach(function(e){var o=r.pieces.find((0,t.same)(\"id\",e));o.curPos={x:o.curPos.x+n.x,y:o.curPos.y+n.y}})},y=function(o){var i=o.pieces.filter(function(r){return r.active});return i.length&&i.length!==o.pieces.length?(i.forEach(function(i){Object.entries(i.neighbors).forEach(function(c){var u=n(c,2),s=u[0],a=u[1],f=o.pieces.find((0,t.same)(\"id\",a));if((0,e.isClose)(f,i,o,s)){var y={x:f.curPos.x+(\"right\"===s?-f.width:\"left\"===s?+f.width:0),y:f.curPos.y+(\"top\"===s?f.height:\"bottom\"===s?-f.height:0)};l(o,i.connections,{x:y.x-i.curPos.x,y:y.y-i.curPos.y}),i.curPos=y,(0,r.shareConnections)(o,i,f)}})}),o):o};exports.snap=y;"},"sourceMaps":{"js":{"mappings":[{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":0}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":13}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":20}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":35}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":43}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":56}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":57}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":64}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":68}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":76}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":86}},{"source":"lib/snap.js","original":{"line":1,"column":0},"generated":{"line":1,"column":88}},{"source":"lib/snap.js","original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"lib/snap.js","original":{"line":1,"column":0},"generated":{"line":1,"column":94}},{"source":"lib/snap.js","original":{"line":1,"column":0},"generated":{"line":1,"column":102}},{"source":"lib/snap.js","original":{"line":2,"column":0},"generated":{"line":1,"column":128}},{"source":"lib/snap.js","original":{"line":2,"column":0},"generated":{"line":1,"column":130}},{"source":"lib/snap.js","original":{"line":2,"column":0},"generated":{"line":1,"column":138}},{"source":"lib/snap.js","original":{"line":3,"column":0},"generated":{"line":1,"column":155}},{"source":"lib/snap.js","original":{"line":3,"column":0},"generated":{"line":1,"column":157}},{"source":"lib/snap.js","original":{"line":3,"column":0},"generated":{"line":1,"column":165}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":197}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":206}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":208}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":210}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":213}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":220}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":222}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":226}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":228}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":230}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":234}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":236}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":238}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":242}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":246}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":255}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":257}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":259}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":262}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":265}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":285}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":293}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":300}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":312}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":319}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":322}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":323}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":327}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":329}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":332}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":335}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":337}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":340}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":342}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":349}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":351}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":355}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":359}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":363}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":365}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":367}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":369}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":376}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":390}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":393}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":395}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":397}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":405}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":413}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":415}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":420}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":422}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":430}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":433}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":435}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":444}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":447}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":450}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":454}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":460}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":463}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":466}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":468}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":470}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":472}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":480}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":484}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":487}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":493}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":495}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":503}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":505}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":514}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":522}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":525}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":527}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":533}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":536}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":543}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":546}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":555}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":557}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":560}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":567}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":569}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":573}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":575}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":579}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":581}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":585}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":589}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":598}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":602}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":608}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":612}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":622}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":763}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":772}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":774}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":776}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":779}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":782}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":784}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":785}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":788}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":805}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":807}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":814}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":816}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":818}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":821}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":825}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":827}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":834}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":844}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":853}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":858}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":861}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":867}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":870}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":873}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":879}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":890}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":893}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":895}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":909}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":911}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":913}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":925}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":931}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":939}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":942}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":950}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":952}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":958}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":963}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":966}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":980}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":983}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1026}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1031}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1034}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1036}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1038}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1046}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1049}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1058}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1060}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1062}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1066}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1072}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1075}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1077}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1079}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1089}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1091}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1093}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1101}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1105}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1109}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1111}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1113}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1115}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1119}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1125}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1128}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1130}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1132}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1136}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1138}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1141}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1143}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1146}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1153}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1155}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1164}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1166}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1169}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1172}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1192}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1200}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1207}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1219}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1226}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1229}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1236}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1242}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1247}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1250}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1259}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1261}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1264}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1267}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1273}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1281}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1284}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1291}},{"source":"lib/snap.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1293}},{"source":"lib/snap.js","name":"moveConnections","original":{"line":5,"column":6},"generated":{"line":1,"column":1297}},{"source":"lib/snap.js","original":{"line":5,"column":24},"generated":{"line":1,"column":1299}},{"source":"lib/snap.js","name":"state","original":{"line":5,"column":25},"generated":{"line":1,"column":1308}},{"source":"lib/snap.js","name":"distance","original":{"line":5,"column":47},"generated":{"line":1,"column":1310}},{"source":"lib/snap.js","name":"distance","original":{"line":5,"column":47},"generated":{"line":1,"column":1312}},{"source":"lib/snap.js","original":{"line":5,"column":60},"generated":{"line":1,"column":1315}},{"source":"lib/snap.js","original":{"line":5,"column":60},"generated":{"line":1,"column":1317}},{"source":"lib/snap.js","original":{"line":5,"column":60},"generated":{"line":1,"column":1320}},{"source":"lib/snap.js","original":{"line":5,"column":60},"generated":{"line":1,"column":1326}},{"source":"lib/snap.js","name":"forEach","original":{"line":6,"column":11},"generated":{"line":1,"column":1329}},{"source":"lib/snap.js","original":{"line":6,"column":19},"generated":{"line":1,"column":1337}},{"source":"lib/snap.js","name":"id","original":{"line":6,"column":20},"generated":{"line":1,"column":1346}},{"source":"lib/snap.js","name":"piece","original":{"line":7,"column":10},"generated":{"line":1,"column":1349}},{"source":"lib/snap.js","name":"piece","original":{"line":7,"column":10},"generated":{"line":1,"column":1353}},{"source":"lib/snap.js","name":"state","original":{"line":7,"column":18},"generated":{"line":1,"column":1355}},{"source":"lib/snap.js","name":"pieces","original":{"line":7,"column":24},"generated":{"line":1,"column":1357}},{"source":"lib/snap.js","name":"find","original":{"line":7,"column":31},"generated":{"line":1,"column":1364}},{"source":"lib/snap.js","original":{"line":7,"column":36},"generated":{"line":1,"column":1370}},{"source":"lib/snap.js","original":{"line":7,"column":41},"generated":{"line":1,"column":1372}},{"source":"lib/snap.js","original":{"line":7,"column":41},"generated":{"line":1,"column":1374}},{"source":"lib/snap.js","original":{"line":7,"column":41},"generated":{"line":1,"column":1380}},{"source":"lib/snap.js","name":"id","original":{"line":7,"column":47},"generated":{"line":1,"column":1385}},{"source":"lib/snap.js","name":"piece","original":{"line":8,"column":4},"generated":{"line":1,"column":1389}},{"source":"lib/snap.js","name":"curPos","original":{"line":8,"column":10},"generated":{"line":1,"column":1391}},{"source":"lib/snap.js","original":{"line":8,"column":19},"generated":{"line":1,"column":1398}},{"source":"lib/snap.js","name":"x","original":{"line":9,"column":6},"generated":{"line":1,"column":1399}},{"source":"lib/snap.js","name":"piece","original":{"line":9,"column":9},"generated":{"line":1,"column":1401}},{"source":"lib/snap.js","name":"curPos","original":{"line":9,"column":15},"generated":{"line":1,"column":1403}},{"source":"lib/snap.js","name":"x","original":{"line":9,"column":22},"generated":{"line":1,"column":1410}},{"source":"lib/snap.js","name":"distance","original":{"line":9,"column":26},"generated":{"line":1,"column":1412}},{"source":"lib/snap.js","name":"x","original":{"line":9,"column":35},"generated":{"line":1,"column":1414}},{"source":"lib/snap.js","name":"y","original":{"line":10,"column":6},"generated":{"line":1,"column":1416}},{"source":"lib/snap.js","name":"piece","original":{"line":10,"column":9},"generated":{"line":1,"column":1418}},{"source":"lib/snap.js","name":"curPos","original":{"line":10,"column":15},"generated":{"line":1,"column":1420}},{"source":"lib/snap.js","name":"y","original":{"line":10,"column":22},"generated":{"line":1,"column":1427}},{"source":"lib/snap.js","name":"distance","original":{"line":10,"column":26},"generated":{"line":1,"column":1429}},{"source":"lib/snap.js","name":"y","original":{"line":10,"column":35},"generated":{"line":1,"column":1431}},{"source":"lib/snap.js","name":"snap","original":{"line":29,"column":13},"generated":{"line":1,"column":1437}},{"source":"lib/snap.js","original":{"line":29,"column":20},"generated":{"line":1,"column":1439}},{"source":"lib/snap.js","name":"state","original":{"line":29,"column":21},"generated":{"line":1,"column":1448}},{"source":"lib/snap.js","name":"activePieces","original":{"line":30,"column":8},"generated":{"line":1,"column":1451}},{"source":"lib/snap.js","name":"activePieces","original":{"line":30,"column":8},"generated":{"line":1,"column":1455}},{"source":"lib/snap.js","name":"state","original":{"line":30,"column":23},"generated":{"line":1,"column":1457}},{"source":"lib/snap.js","name":"pieces","original":{"line":30,"column":29},"generated":{"line":1,"column":1459}},{"source":"lib/snap.js","name":"filter","original":{"line":30,"column":36},"generated":{"line":1,"column":1466}},{"source":"lib/snap.js","original":{"line":30,"column":43},"generated":{"line":1,"column":1473}},{"source":"lib/snap.js","name":"piece","original":{"line":30,"column":44},"generated":{"line":1,"column":1482}},{"source":"lib/snap.js","name":"piece","original":{"line":30,"column":54},"generated":{"line":1,"column":1485}},{"source":"lib/snap.js","name":"piece","original":{"line":30,"column":54},"generated":{"line":1,"column":1492}},{"source":"lib/snap.js","name":"active","original":{"line":30,"column":60},"generated":{"line":1,"column":1494}},{"source":"lib/snap.js","original":{"line":32,"column":6},"generated":{"line":1,"column":1503}},{"source":"lib/snap.js","name":"activePieces","original":{"line":32,"column":7},"generated":{"line":1,"column":1510}},{"source":"lib/snap.js","name":"length","original":{"line":32,"column":20},"generated":{"line":1,"column":1512}},{"source":"lib/snap.js","name":"activePieces","original":{"line":32,"column":30},"generated":{"line":1,"column":1520}},{"source":"lib/snap.js","name":"length","original":{"line":32,"column":43},"generated":{"line":1,"column":1522}},{"source":"lib/snap.js","name":"state","original":{"line":32,"column":54},"generated":{"line":1,"column":1531}},{"source":"lib/snap.js","name":"pieces","original":{"line":32,"column":60},"generated":{"line":1,"column":1533}},{"source":"lib/snap.js","name":"length","original":{"line":32,"column":67},"generated":{"line":1,"column":1540}},{"source":"lib/snap.js","name":"activePieces","original":{"line":36,"column":2},"generated":{"line":1,"column":1548}},{"source":"lib/snap.js","name":"forEach","original":{"line":36,"column":15},"generated":{"line":1,"column":1550}},{"source":"lib/snap.js","original":{"line":36,"column":23},"generated":{"line":1,"column":1558}},{"source":"lib/snap.js","name":"piece","original":{"line":36,"column":24},"generated":{"line":1,"column":1567}},{"source":"lib/snap.js","name":"Object","original":{"line":37,"column":4},"generated":{"line":1,"column":1570}},{"source":"lib/snap.js","name":"entries","original":{"line":37,"column":11},"generated":{"line":1,"column":1577}},{"source":"lib/snap.js","name":"piece","original":{"line":37,"column":19},"generated":{"line":1,"column":1585}},{"source":"lib/snap.js","name":"neighbors","original":{"line":37,"column":25},"generated":{"line":1,"column":1587}},{"source":"lib/snap.js","name":"forEach","original":{"line":37,"column":36},"generated":{"line":1,"column":1598}},{"source":"lib/snap.js","original":{"line":37,"column":44},"generated":{"line":1,"column":1606}},{"source":"lib/snap.js","original":{"line":37,"column":60},"generated":{"line":1,"column":1615}},{"source":"lib/snap.js","original":{"line":37,"column":60},"generated":{"line":1,"column":1618}},{"source":"lib/snap.js","original":{"line":37,"column":60},"generated":{"line":1,"column":1622}},{"source":"lib/snap.js","original":{"line":37,"column":60},"generated":{"line":1,"column":1624}},{"source":"lib/snap.js","original":{"line":37,"column":60},"generated":{"line":1,"column":1626}},{"source":"lib/snap.js","original":{"line":37,"column":60},"generated":{"line":1,"column":1628}},{"source":"lib/snap.js","name":"side","original":{"line":37,"column":46},"generated":{"line":1,"column":1631}},{"source":"lib/snap.js","original":{"line":37,"column":60},"generated":{"line":1,"column":1633}},{"source":"lib/snap.js","original":{"line":37,"column":60},"generated":{"line":1,"column":1635}},{"source":"lib/snap.js","name":"id","original":{"line":37,"column":52},"generated":{"line":1,"column":1638}},{"source":"lib/snap.js","original":{"line":37,"column":60},"generated":{"line":1,"column":1640}},{"source":"lib/snap.js","original":{"line":37,"column":60},"generated":{"line":1,"column":1642}},{"source":"lib/snap.js","name":"neighbor","original":{"line":38,"column":12},"generated":{"line":1,"column":1645}},{"source":"lib/snap.js","name":"state","original":{"line":38,"column":23},"generated":{"line":1,"column":1647}},{"source":"lib/snap.js","name":"pieces","original":{"line":38,"column":29},"generated":{"line":1,"column":1649}},{"source":"lib/snap.js","name":"find","original":{"line":38,"column":36},"generated":{"line":1,"column":1656}},{"source":"lib/snap.js","original":{"line":38,"column":41},"generated":{"line":1,"column":1662}},{"source":"lib/snap.js","original":{"line":38,"column":46},"generated":{"line":1,"column":1664}},{"source":"lib/snap.js","original":{"line":38,"column":46},"generated":{"line":1,"column":1666}},{"source":"lib/snap.js","original":{"line":38,"column":46},"generated":{"line":1,"column":1672}},{"source":"lib/snap.js","name":"id","original":{"line":38,"column":52},"generated":{"line":1,"column":1677}},{"source":"lib/snap.js","original":{"line":40,"column":10},"generated":{"line":1,"column":1681}},{"source":"lib/snap.js","original":{"line":40,"column":10},"generated":{"line":1,"column":1685}},{"source":"lib/snap.js","name":"neighbor","original":{"line":40,"column":18},"generated":{"line":1,"column":1687}},{"source":"lib/snap.js","name":"neighbor","original":{"line":40,"column":18},"generated":{"line":1,"column":1689}},{"source":"lib/snap.js","name":"neighbor","original":{"line":40,"column":18},"generated":{"line":1,"column":1698}},{"source":"lib/snap.js","name":"piece","original":{"line":40,"column":28},"generated":{"line":1,"column":1700}},{"source":"lib/snap.js","name":"state","original":{"line":40,"column":35},"generated":{"line":1,"column":1702}},{"source":"lib/snap.js","name":"side","original":{"line":40,"column":42},"generated":{"line":1,"column":1704}},{"source":"lib/snap.js","original":{"line":40,"column":49},"generated":{"line":1,"column":1707}},{"source":"lib/snap.js","name":"newPos","original":{"line":41,"column":14},"generated":{"line":1,"column":1708}},{"source":"lib/snap.js","name":"newPos","original":{"line":41,"column":14},"generated":{"line":1,"column":1712}},{"source":"lib/snap.js","original":{"line":41,"column":23},"generated":{"line":1,"column":1714}},{"source":"lib/snap.js","name":"x","original":{"line":42,"column":10},"generated":{"line":1,"column":1715}},{"source":"lib/snap.js","name":"neighbor","original":{"line":43,"column":12},"generated":{"line":1,"column":1717}},{"source":"lib/snap.js","name":"curPos","original":{"line":43,"column":21},"generated":{"line":1,"column":1719}},{"source":"lib/snap.js","name":"x","original":{"line":43,"column":28},"generated":{"line":1,"column":1726}},{"source":"lib/snap.js","original":{"line":44,"column":22},"generated":{"line":1,"column":1729}},{"source":"lib/snap.js","name":"side","original":{"line":44,"column":13},"generated":{"line":1,"column":1739}},{"source":"lib/snap.js","name":"neighbor","original":{"line":45,"column":17},"generated":{"line":1,"column":1742}},{"source":"lib/snap.js","name":"width","original":{"line":45,"column":26},"generated":{"line":1,"column":1744}},{"source":"lib/snap.js","original":{"line":46,"column":25},"generated":{"line":1,"column":1750}},{"source":"lib/snap.js","name":"side","original":{"line":46,"column":16},"generated":{"line":1,"column":1759}},{"source":"lib/snap.js","name":"neighbor","original":{"line":47,"column":17},"generated":{"line":1,"column":1762}},{"source":"lib/snap.js","name":"width","original":{"line":47,"column":26},"generated":{"line":1,"column":1764}},{"source":"lib/snap.js","original":{"line":48,"column":16},"generated":{"line":1,"column":1770}},{"source":"lib/snap.js","name":"y","original":{"line":49,"column":10},"generated":{"line":1,"column":1773}},{"source":"lib/snap.js","name":"neighbor","original":{"line":50,"column":12},"generated":{"line":1,"column":1775}},{"source":"lib/snap.js","name":"curPos","original":{"line":50,"column":21},"generated":{"line":1,"column":1777}},{"source":"lib/snap.js","name":"y","original":{"line":50,"column":28},"generated":{"line":1,"column":1784}},{"source":"lib/snap.js","original":{"line":51,"column":22},"generated":{"line":1,"column":1787}},{"source":"lib/snap.js","name":"side","original":{"line":51,"column":13},"generated":{"line":1,"column":1795}},{"source":"lib/snap.js","name":"neighbor","original":{"line":52,"column":16},"generated":{"line":1,"column":1797}},{"source":"lib/snap.js","name":"height","original":{"line":52,"column":25},"generated":{"line":1,"column":1799}},{"source":"lib/snap.js","original":{"line":53,"column":25},"generated":{"line":1,"column":1806}},{"source":"lib/snap.js","name":"side","original":{"line":53,"column":16},"generated":{"line":1,"column":1817}},{"source":"lib/snap.js","name":"neighbor","original":{"line":54,"column":17},"generated":{"line":1,"column":1820}},{"source":"lib/snap.js","name":"height","original":{"line":54,"column":26},"generated":{"line":1,"column":1822}},{"source":"lib/snap.js","original":{"line":55,"column":16},"generated":{"line":1,"column":1829}},{"source":"lib/snap.js","name":"moveConnections","original":{"line":59,"column":8},"generated":{"line":1,"column":1833}},{"source":"lib/snap.js","name":"state","original":{"line":59,"column":24},"generated":{"line":1,"column":1835}},{"source":"lib/snap.js","name":"piece","original":{"line":59,"column":31},"generated":{"line":1,"column":1837}},{"source":"lib/snap.js","name":"connections","original":{"line":59,"column":37},"generated":{"line":1,"column":1839}},{"source":"lib/snap.js","original":{"line":59,"column":50},"generated":{"line":1,"column":1851}},{"source":"lib/snap.js","name":"x","original":{"line":60,"column":10},"generated":{"line":1,"column":1852}},{"source":"lib/snap.js","name":"newPos","original":{"line":60,"column":13},"generated":{"line":1,"column":1854}},{"source":"lib/snap.js","name":"x","original":{"line":60,"column":20},"generated":{"line":1,"column":1856}},{"source":"lib/snap.js","name":"piece","original":{"line":60,"column":24},"generated":{"line":1,"column":1858}},{"source":"lib/snap.js","name":"curPos","original":{"line":60,"column":30},"generated":{"line":1,"column":1860}},{"source":"lib/snap.js","name":"x","original":{"line":60,"column":37},"generated":{"line":1,"column":1867}},{"source":"lib/snap.js","name":"y","original":{"line":61,"column":10},"generated":{"line":1,"column":1869}},{"source":"lib/snap.js","name":"newPos","original":{"line":61,"column":13},"generated":{"line":1,"column":1871}},{"source":"lib/snap.js","name":"y","original":{"line":61,"column":20},"generated":{"line":1,"column":1873}},{"source":"lib/snap.js","name":"piece","original":{"line":61,"column":24},"generated":{"line":1,"column":1875}},{"source":"lib/snap.js","name":"curPos","original":{"line":61,"column":30},"generated":{"line":1,"column":1877}},{"source":"lib/snap.js","name":"y","original":{"line":61,"column":37},"generated":{"line":1,"column":1884}},{"source":"lib/snap.js","name":"piece","original":{"line":64,"column":8},"generated":{"line":1,"column":1888}},{"source":"lib/snap.js","name":"curPos","original":{"line":64,"column":14},"generated":{"line":1,"column":1890}},{"source":"lib/snap.js","name":"newPos","original":{"line":64,"column":23},"generated":{"line":1,"column":1897}},{"source":"lib/snap.js","name":"state","original":{"line":68,"column":25},"generated":{"line":1,"column":1900}},{"source":"lib/snap.js","name":"state","original":{"line":68,"column":25},"generated":{"line":1,"column":1902}},{"source":"lib/snap.js","name":"state","original":{"line":68,"column":25},"generated":{"line":1,"column":1904}},{"source":"lib/snap.js","name":"state","original":{"line":68,"column":25},"generated":{"line":1,"column":1922}},{"source":"lib/snap.js","name":"piece","original":{"line":68,"column":32},"generated":{"line":1,"column":1924}},{"source":"lib/snap.js","name":"neighbor","original":{"line":68,"column":39},"generated":{"line":1,"column":1926}},{"source":"lib/snap.js","name":"state","original":{"line":73,"column":9},"generated":{"line":1,"column":1934}},{"source":"lib/snap.js","name":"state","original":{"line":33,"column":11},"generated":{"line":1,"column":1937}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1940}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1948}},{"source":"lib/snap.js","original":{"line":29,"column":7},"generated":{"line":1,"column":1953}}],"sources":{"lib/snap.js":"import { shareConnections } from \"./share-connections.js\";\nimport { isClose } from \"./is-close.js\";\nimport { same } from \"./../utils/object-helpers.js\";\n\nconst moveConnections = (state, [...pieceIds], distance) => {\n  pieceIds.forEach((id) => {\n    const piece = state.pieces.find(same(\"id\", id));\n    piece.curPos = {\n      x: piece.curPos.x + distance.x,\n      y: piece.curPos.y + distance.y,\n    };\n  });\n};\n\n// export const snapNew = (state) => ({\n//   ...state,\n//   pieces: state.pieces.map((piece) => ({\n//     ...piece,\n//     curPos:\n//       !piece.active ||\n//       !Object.entries(piece.neighbors).find(([side, id]) =>\n//         isClose(state.pieces.find(same(\"id\", id)), piece, state, side)\n//       )\n//         ? piece.curPos\n//         : { x: 10, y: 20 }\n//   }))\n// });\n\nexport const snap = (state) => {\n  const activePieces = state.pieces.filter((piece) => piece.active);\n\n  if (!activePieces.length || activePieces.length === state.pieces.length) {\n    return state;\n  }\n\n  activePieces.forEach((piece) => {\n    Object.entries(piece.neighbors).forEach(([side, id]) => {\n      const neighbor = state.pieces.find(same(\"id\", id));\n\n      if (isClose(neighbor, piece, state, side)) {\n        const newPos = {\n          x:\n            neighbor.curPos.x +\n            (side === \"right\"\n              ? -neighbor.width\n              : side === \"left\"\n              ? +neighbor.width\n              : 0),\n          y:\n            neighbor.curPos.y +\n            (side === \"top\"\n              ? neighbor.height\n              : side === \"bottom\"\n              ? -neighbor.height\n              : 0),\n        };\n\n        // order is important\n        moveConnections(state, piece.connections, {\n          x: newPos.x - piece.curPos.x,\n          y: newPos.y - piece.curPos.y,\n        });\n\n        piece.curPos = newPos;\n\n        // piece.connections = neighbor.connections = shareConnections(state, piece, neighbor);\n\n        shareConnections(state, piece, neighbor);\n      }\n    });\n  });\n\n  return state;\n};\n"},"lineCount":null}},"error":null,"hash":"7a0f1a1427c8620cbd71e54e6a83dd4d","cacheData":{"env":{}}}