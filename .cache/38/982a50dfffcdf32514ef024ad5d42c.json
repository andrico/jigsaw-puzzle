{"id":"xNGh","dependencies":[{"name":"/Users/erik/webdev/temp/jigsaw-puzzle/package.json","includedInParent":true,"mtime":1607410169015},{"name":"./../utils/array-helpers.js","loc":{"line":1,"column":50},"parent":"/Users/erik/webdev/temp/jigsaw-puzzle/src/lib/activate.js","resolved":"/Users/erik/webdev/temp/jigsaw-puzzle/src/utils/array-helpers.js"},{"name":"./../utils/object-helpers.js","loc":{"line":2,"column":25},"parent":"/Users/erik/webdev/temp/jigsaw-puzzle/src/lib/activate.js","resolved":"/Users/erik/webdev/temp/jigsaw-puzzle/src/utils/object-helpers.js"},{"name":"./../utils/run-if.js","loc":{"line":3,"column":22},"parent":"/Users/erik/webdev/temp/jigsaw-puzzle/src/lib/activate.js","resolved":"/Users/erik/webdev/temp/jigsaw-puzzle/src/utils/run-if.js"},{"name":"./../utils/pipe.js","loc":{"line":4,"column":21},"parent":"/Users/erik/webdev/temp/jigsaw-puzzle/src/lib/activate.js","resolved":"/Users/erik/webdev/temp/jigsaw-puzzle/src/utils/pipe.js"},{"name":"./../utils/tap.js","loc":{"line":5,"column":20},"parent":"/Users/erik/webdev/temp/jigsaw-puzzle/src/lib/activate.js","resolved":"/Users/erik/webdev/temp/jigsaw-puzzle/src/utils/tap.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.activate=void 0;var e=require(\"./../utils/array-helpers.js\"),t=require(\"./../utils/object-helpers.js\"),r=require(\"./../utils/run-if.js\"),n=require(\"./../utils/pipe.js\"),c=require(\"./../utils/tap.js\");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(e,t,r){return(r.clientX-e.canvas.pos.x)*e.canvas.DPI>=t.curPos.x&&(r.clientX-e.canvas.pos.x)*e.canvas.DPI<=t.curPos.x+t.width},o=function(e,t,r){return(r.clientY-e.canvas.pos.y)*e.canvas.DPI>=t.curPos.y&&(r.clientY-e.canvas.pos.y)*e.canvas.DPI<=t.curPos.y+t.height},p=function(e,t,r){return a(e,t,r)&&o(e,t,r)},l=function(e,t,r){return{x:(r.clientX-e.canvas.pos.x)*e.canvas.DPI-t.curPos.x,y:(r.clientY-e.canvas.pos.y)*e.canvas.DPI-t.curPos.y}},f=function(c){return function(i){return s(s({},i),{},{pieces:(0,n.pipe)((0,e.mapReverse)(function(e,r,n,u){return s(s({},e),{},{active:!(u.find((0,t.isTruthy)(\"active\"))||!p(i,e,c))&&l(i,e,c)})}),(0,e.mapReverse)(function(e,r,n){return s(s({},e),{},{active:n.find(function(t){return t.active&&t.connections.includes(e.id)})?l(i,e,c):!n.find((0,t.isTruthy)(\"active\"))&&i.puzzle.draggable?l(i,e,c):e.active})}),(0,r.runIf)((0,e.sort)(e.activeLast))(function(e){return!i.puzzle.done&&e.filter(function(e){return e.active}).length!==i.pieces.length}))(i.pieces)})}};exports.activate=f;"},"sourceMaps":{"js":{"mappings":[{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":0}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":13}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":20}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":35}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":43}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":56}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":57}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":64}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":68}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":76}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":90}},{"source":"lib/activate.js","original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"lib/activate.js","original":{"line":1,"column":0},"generated":{"line":1,"column":96}},{"source":"lib/activate.js","original":{"line":1,"column":0},"generated":{"line":1,"column":98}},{"source":"lib/activate.js","original":{"line":1,"column":0},"generated":{"line":1,"column":106}},{"source":"lib/activate.js","original":{"line":2,"column":0},"generated":{"line":1,"column":137}},{"source":"lib/activate.js","original":{"line":2,"column":0},"generated":{"line":1,"column":139}},{"source":"lib/activate.js","original":{"line":2,"column":0},"generated":{"line":1,"column":147}},{"source":"lib/activate.js","original":{"line":3,"column":0},"generated":{"line":1,"column":179}},{"source":"lib/activate.js","original":{"line":3,"column":0},"generated":{"line":1,"column":181}},{"source":"lib/activate.js","original":{"line":3,"column":0},"generated":{"line":1,"column":189}},{"source":"lib/activate.js","original":{"line":4,"column":0},"generated":{"line":1,"column":213}},{"source":"lib/activate.js","original":{"line":4,"column":0},"generated":{"line":1,"column":215}},{"source":"lib/activate.js","original":{"line":4,"column":0},"generated":{"line":1,"column":223}},{"source":"lib/activate.js","original":{"line":5,"column":0},"generated":{"line":1,"column":245}},{"source":"lib/activate.js","original":{"line":5,"column":0},"generated":{"line":1,"column":247}},{"source":"lib/activate.js","original":{"line":5,"column":0},"generated":{"line":1,"column":255}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":276}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":285}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":287}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":289}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":292}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":296}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":298}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":305}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":310}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":313}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":316}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":323}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":345}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":346}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":350}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":352}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":359}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":381}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":384}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":388}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":390}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":392}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":399}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":408}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":411}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":418}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":425}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":450}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":452}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":455}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":469}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":471}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":476}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":482}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":484}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":487}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":494}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":496}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":505}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":507}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":510}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":514}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":518}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":520}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":522}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":524}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":534}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":541}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":545}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":546}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":550}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":552}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":558}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":568}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":571}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":581}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":584}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":587}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":589}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":591}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":593}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":600}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":604}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":607}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":615}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":624}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":627}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":629}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":631}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":633}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":635}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":641}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":648}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":674}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":681}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":698}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":700}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":707}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":733}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":737}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":739}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":746}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":750}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":758}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":767}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":770}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":777}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":792}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":794}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":796}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":803}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":828}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":830}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":836}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":843}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":845}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":854}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":856}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":858}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":860}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":863}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":870}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":875}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":877}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":884}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":899}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":901}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":903}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":904}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":910}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":912}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":924}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":926}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":940}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":942}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":952}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":956}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":958}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":961}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":963}},{"source":"lib/activate.js","original":{"line":7,"column":0},"generated":{"line":1,"column":965}},{"source":"lib/activate.js","name":"isWithinX","original":{"line":7,"column":6},"generated":{"line":1,"column":969}},{"source":"lib/activate.js","original":{"line":7,"column":18},"generated":{"line":1,"column":971}},{"source":"lib/activate.js","name":"state","original":{"line":7,"column":19},"generated":{"line":1,"column":980}},{"source":"lib/activate.js","name":"piece","original":{"line":7,"column":26},"generated":{"line":1,"column":982}},{"source":"lib/activate.js","name":"e","original":{"line":7,"column":33},"generated":{"line":1,"column":984}},{"source":"lib/activate.js","original":{"line":8,"column":2},"generated":{"line":1,"column":987}},{"source":"lib/activate.js","name":"e","original":{"line":8,"column":3},"generated":{"line":1,"column":994}},{"source":"lib/activate.js","name":"clientX","original":{"line":8,"column":5},"generated":{"line":1,"column":996}},{"source":"lib/activate.js","name":"state","original":{"line":8,"column":15},"generated":{"line":1,"column":1004}},{"source":"lib/activate.js","name":"canvas","original":{"line":8,"column":21},"generated":{"line":1,"column":1006}},{"source":"lib/activate.js","name":"pos","original":{"line":8,"column":28},"generated":{"line":1,"column":1013}},{"source":"lib/activate.js","name":"x","original":{"line":8,"column":32},"generated":{"line":1,"column":1017}},{"source":"lib/activate.js","name":"state","original":{"line":8,"column":37},"generated":{"line":1,"column":1020}},{"source":"lib/activate.js","name":"canvas","original":{"line":8,"column":43},"generated":{"line":1,"column":1022}},{"source":"lib/activate.js","name":"DPI","original":{"line":8,"column":50},"generated":{"line":1,"column":1029}},{"source":"lib/activate.js","name":"piece","original":{"line":8,"column":57},"generated":{"line":1,"column":1034}},{"source":"lib/activate.js","name":"curPos","original":{"line":8,"column":63},"generated":{"line":1,"column":1036}},{"source":"lib/activate.js","name":"x","original":{"line":8,"column":70},"generated":{"line":1,"column":1043}},{"source":"lib/activate.js","name":"e","original":{"line":9,"column":3},"generated":{"line":1,"column":1047}},{"source":"lib/activate.js","name":"clientX","original":{"line":9,"column":5},"generated":{"line":1,"column":1049}},{"source":"lib/activate.js","name":"state","original":{"line":9,"column":15},"generated":{"line":1,"column":1057}},{"source":"lib/activate.js","name":"canvas","original":{"line":9,"column":21},"generated":{"line":1,"column":1059}},{"source":"lib/activate.js","name":"pos","original":{"line":9,"column":28},"generated":{"line":1,"column":1066}},{"source":"lib/activate.js","name":"x","original":{"line":9,"column":32},"generated":{"line":1,"column":1070}},{"source":"lib/activate.js","name":"state","original":{"line":9,"column":37},"generated":{"line":1,"column":1073}},{"source":"lib/activate.js","name":"canvas","original":{"line":9,"column":43},"generated":{"line":1,"column":1075}},{"source":"lib/activate.js","name":"DPI","original":{"line":9,"column":50},"generated":{"line":1,"column":1082}},{"source":"lib/activate.js","name":"piece","original":{"line":10,"column":4},"generated":{"line":1,"column":1087}},{"source":"lib/activate.js","name":"curPos","original":{"line":10,"column":10},"generated":{"line":1,"column":1089}},{"source":"lib/activate.js","name":"x","original":{"line":10,"column":17},"generated":{"line":1,"column":1096}},{"source":"lib/activate.js","name":"piece","original":{"line":10,"column":21},"generated":{"line":1,"column":1098}},{"source":"lib/activate.js","name":"width","original":{"line":10,"column":27},"generated":{"line":1,"column":1100}},{"source":"lib/activate.js","name":"isWithinY","original":{"line":12,"column":6},"generated":{"line":1,"column":1107}},{"source":"lib/activate.js","original":{"line":12,"column":18},"generated":{"line":1,"column":1109}},{"source":"lib/activate.js","name":"state","original":{"line":12,"column":19},"generated":{"line":1,"column":1118}},{"source":"lib/activate.js","name":"piece","original":{"line":12,"column":26},"generated":{"line":1,"column":1120}},{"source":"lib/activate.js","name":"e","original":{"line":12,"column":33},"generated":{"line":1,"column":1122}},{"source":"lib/activate.js","original":{"line":13,"column":2},"generated":{"line":1,"column":1125}},{"source":"lib/activate.js","name":"e","original":{"line":13,"column":3},"generated":{"line":1,"column":1132}},{"source":"lib/activate.js","name":"clientY","original":{"line":13,"column":5},"generated":{"line":1,"column":1134}},{"source":"lib/activate.js","name":"state","original":{"line":13,"column":15},"generated":{"line":1,"column":1142}},{"source":"lib/activate.js","name":"canvas","original":{"line":13,"column":21},"generated":{"line":1,"column":1144}},{"source":"lib/activate.js","name":"pos","original":{"line":13,"column":28},"generated":{"line":1,"column":1151}},{"source":"lib/activate.js","name":"y","original":{"line":13,"column":32},"generated":{"line":1,"column":1155}},{"source":"lib/activate.js","name":"state","original":{"line":13,"column":37},"generated":{"line":1,"column":1158}},{"source":"lib/activate.js","name":"canvas","original":{"line":13,"column":43},"generated":{"line":1,"column":1160}},{"source":"lib/activate.js","name":"DPI","original":{"line":13,"column":50},"generated":{"line":1,"column":1167}},{"source":"lib/activate.js","name":"piece","original":{"line":13,"column":57},"generated":{"line":1,"column":1172}},{"source":"lib/activate.js","name":"curPos","original":{"line":13,"column":63},"generated":{"line":1,"column":1174}},{"source":"lib/activate.js","name":"y","original":{"line":13,"column":70},"generated":{"line":1,"column":1181}},{"source":"lib/activate.js","name":"e","original":{"line":14,"column":3},"generated":{"line":1,"column":1185}},{"source":"lib/activate.js","name":"clientY","original":{"line":14,"column":5},"generated":{"line":1,"column":1187}},{"source":"lib/activate.js","name":"state","original":{"line":14,"column":15},"generated":{"line":1,"column":1195}},{"source":"lib/activate.js","name":"canvas","original":{"line":14,"column":21},"generated":{"line":1,"column":1197}},{"source":"lib/activate.js","name":"pos","original":{"line":14,"column":28},"generated":{"line":1,"column":1204}},{"source":"lib/activate.js","name":"y","original":{"line":14,"column":32},"generated":{"line":1,"column":1208}},{"source":"lib/activate.js","name":"state","original":{"line":14,"column":37},"generated":{"line":1,"column":1211}},{"source":"lib/activate.js","name":"canvas","original":{"line":14,"column":43},"generated":{"line":1,"column":1213}},{"source":"lib/activate.js","name":"DPI","original":{"line":14,"column":50},"generated":{"line":1,"column":1220}},{"source":"lib/activate.js","name":"piece","original":{"line":15,"column":4},"generated":{"line":1,"column":1225}},{"source":"lib/activate.js","name":"curPos","original":{"line":15,"column":10},"generated":{"line":1,"column":1227}},{"source":"lib/activate.js","name":"y","original":{"line":15,"column":17},"generated":{"line":1,"column":1234}},{"source":"lib/activate.js","name":"piece","original":{"line":15,"column":21},"generated":{"line":1,"column":1236}},{"source":"lib/activate.js","name":"height","original":{"line":15,"column":27},"generated":{"line":1,"column":1238}},{"source":"lib/activate.js","name":"isClicked","original":{"line":17,"column":6},"generated":{"line":1,"column":1246}},{"source":"lib/activate.js","original":{"line":17,"column":18},"generated":{"line":1,"column":1248}},{"source":"lib/activate.js","name":"state","original":{"line":17,"column":19},"generated":{"line":1,"column":1257}},{"source":"lib/activate.js","name":"piece","original":{"line":17,"column":26},"generated":{"line":1,"column":1259}},{"source":"lib/activate.js","name":"e","original":{"line":17,"column":33},"generated":{"line":1,"column":1261}},{"source":"lib/activate.js","name":"isWithinX","original":{"line":18,"column":2},"generated":{"line":1,"column":1264}},{"source":"lib/activate.js","name":"isWithinX","original":{"line":18,"column":2},"generated":{"line":1,"column":1271}},{"source":"lib/activate.js","name":"state","original":{"line":18,"column":12},"generated":{"line":1,"column":1273}},{"source":"lib/activate.js","name":"piece","original":{"line":18,"column":19},"generated":{"line":1,"column":1275}},{"source":"lib/activate.js","name":"e","original":{"line":18,"column":26},"generated":{"line":1,"column":1277}},{"source":"lib/activate.js","name":"isWithinY","original":{"line":18,"column":32},"generated":{"line":1,"column":1281}},{"source":"lib/activate.js","name":"state","original":{"line":18,"column":42},"generated":{"line":1,"column":1283}},{"source":"lib/activate.js","name":"piece","original":{"line":18,"column":49},"generated":{"line":1,"column":1285}},{"source":"lib/activate.js","name":"e","original":{"line":18,"column":56},"generated":{"line":1,"column":1287}},{"source":"lib/activate.js","name":"getPiecePos","original":{"line":20,"column":6},"generated":{"line":1,"column":1291}},{"source":"lib/activate.js","original":{"line":20,"column":20},"generated":{"line":1,"column":1293}},{"source":"lib/activate.js","name":"state","original":{"line":20,"column":21},"generated":{"line":1,"column":1302}},{"source":"lib/activate.js","name":"piece","original":{"line":20,"column":28},"generated":{"line":1,"column":1304}},{"source":"lib/activate.js","name":"e","original":{"line":20,"column":35},"generated":{"line":1,"column":1306}},{"source":"lib/activate.js","original":{"line":20,"column":42},"generated":{"line":1,"column":1309}},{"source":"lib/activate.js","original":{"line":20,"column":42},"generated":{"line":1,"column":1315}},{"source":"lib/activate.js","name":"x","original":{"line":21,"column":2},"generated":{"line":1,"column":1316}},{"source":"lib/activate.js","name":"e","original":{"line":21,"column":6},"generated":{"line":1,"column":1319}},{"source":"lib/activate.js","name":"clientX","original":{"line":21,"column":8},"generated":{"line":1,"column":1321}},{"source":"lib/activate.js","name":"state","original":{"line":21,"column":18},"generated":{"line":1,"column":1329}},{"source":"lib/activate.js","name":"canvas","original":{"line":21,"column":24},"generated":{"line":1,"column":1331}},{"source":"lib/activate.js","name":"pos","original":{"line":21,"column":31},"generated":{"line":1,"column":1338}},{"source":"lib/activate.js","name":"x","original":{"line":21,"column":35},"generated":{"line":1,"column":1342}},{"source":"lib/activate.js","name":"state","original":{"line":21,"column":40},"generated":{"line":1,"column":1345}},{"source":"lib/activate.js","name":"canvas","original":{"line":21,"column":46},"generated":{"line":1,"column":1347}},{"source":"lib/activate.js","name":"DPI","original":{"line":21,"column":53},"generated":{"line":1,"column":1354}},{"source":"lib/activate.js","name":"piece","original":{"line":21,"column":59},"generated":{"line":1,"column":1358}},{"source":"lib/activate.js","name":"curPos","original":{"line":21,"column":65},"generated":{"line":1,"column":1360}},{"source":"lib/activate.js","name":"x","original":{"line":21,"column":72},"generated":{"line":1,"column":1367}},{"source":"lib/activate.js","name":"y","original":{"line":22,"column":2},"generated":{"line":1,"column":1369}},{"source":"lib/activate.js","name":"e","original":{"line":22,"column":6},"generated":{"line":1,"column":1372}},{"source":"lib/activate.js","name":"clientY","original":{"line":22,"column":8},"generated":{"line":1,"column":1374}},{"source":"lib/activate.js","name":"state","original":{"line":22,"column":18},"generated":{"line":1,"column":1382}},{"source":"lib/activate.js","name":"canvas","original":{"line":22,"column":24},"generated":{"line":1,"column":1384}},{"source":"lib/activate.js","name":"pos","original":{"line":22,"column":31},"generated":{"line":1,"column":1391}},{"source":"lib/activate.js","name":"y","original":{"line":22,"column":35},"generated":{"line":1,"column":1395}},{"source":"lib/activate.js","name":"state","original":{"line":22,"column":40},"generated":{"line":1,"column":1398}},{"source":"lib/activate.js","name":"canvas","original":{"line":22,"column":46},"generated":{"line":1,"column":1400}},{"source":"lib/activate.js","name":"DPI","original":{"line":22,"column":53},"generated":{"line":1,"column":1407}},{"source":"lib/activate.js","name":"piece","original":{"line":22,"column":59},"generated":{"line":1,"column":1411}},{"source":"lib/activate.js","name":"curPos","original":{"line":22,"column":65},"generated":{"line":1,"column":1413}},{"source":"lib/activate.js","name":"y","original":{"line":22,"column":72},"generated":{"line":1,"column":1420}},{"source":"lib/activate.js","name":"activate","original":{"line":26,"column":13},"generated":{"line":1,"column":1424}},{"source":"lib/activate.js","original":{"line":26,"column":24},"generated":{"line":1,"column":1426}},{"source":"lib/activate.js","name":"e","original":{"line":26,"column":25},"generated":{"line":1,"column":1435}},{"source":"lib/activate.js","original":{"line":26,"column":31},"generated":{"line":1,"column":1438}},{"source":"lib/activate.js","original":{"line":26,"column":31},"generated":{"line":1,"column":1445}},{"source":"lib/activate.js","name":"state","original":{"line":26,"column":32},"generated":{"line":1,"column":1454}},{"source":"lib/activate.js","name":"state","original":{"line":27,"column":5},"generated":{"line":1,"column":1457}},{"source":"lib/activate.js","name":"state","original":{"line":27,"column":5},"generated":{"line":1,"column":1464}},{"source":"lib/activate.js","name":"state","original":{"line":27,"column":5},"generated":{"line":1,"column":1466}},{"source":"lib/activate.js","name":"state","original":{"line":27,"column":5},"generated":{"line":1,"column":1468}},{"source":"lib/activate.js","name":"state","original":{"line":27,"column":5},"generated":{"line":1,"column":1471}},{"source":"lib/activate.js","original":{"line":26,"column":31},"generated":{"line":1,"column":1474}},{"source":"lib/activate.js","original":{"line":26,"column":31},"generated":{"line":1,"column":1477}},{"source":"lib/activate.js","name":"pieces","original":{"line":28,"column":2},"generated":{"line":1,"column":1478}},{"source":"lib/activate.js","original":{"line":28,"column":10},"generated":{"line":1,"column":1486}},{"source":"lib/activate.js","original":{"line":29,"column":4},"generated":{"line":1,"column":1488}},{"source":"lib/activate.js","original":{"line":29,"column":4},"generated":{"line":1,"column":1490}},{"source":"lib/activate.js","original":{"line":30,"column":15},"generated":{"line":1,"column":1497}},{"source":"lib/activate.js","original":{"line":30,"column":15},"generated":{"line":1,"column":1499}},{"source":"lib/activate.js","original":{"line":30,"column":15},"generated":{"line":1,"column":1501}},{"source":"lib/activate.js","original":{"line":30,"column":15},"generated":{"line":1,"column":1513}},{"source":"lib/activate.js","name":"piece","original":{"line":30,"column":16},"generated":{"line":1,"column":1522}},{"source":"lib/activate.js","name":"i","original":{"line":30,"column":23},"generated":{"line":1,"column":1524}},{"source":"lib/activate.js","name":"arr","original":{"line":30,"column":26},"generated":{"line":1,"column":1526}},{"source":"lib/activate.js","name":"acc","original":{"line":30,"column":31},"generated":{"line":1,"column":1528}},{"source":"lib/activate.js","name":"piece","original":{"line":31,"column":9},"generated":{"line":1,"column":1531}},{"source":"lib/activate.js","name":"piece","original":{"line":31,"column":9},"generated":{"line":1,"column":1538}},{"source":"lib/activate.js","name":"piece","original":{"line":31,"column":9},"generated":{"line":1,"column":1540}},{"source":"lib/activate.js","name":"piece","original":{"line":31,"column":9},"generated":{"line":1,"column":1542}},{"source":"lib/activate.js","name":"piece","original":{"line":31,"column":9},"generated":{"line":1,"column":1545}},{"source":"lib/activate.js","original":{"line":30,"column":15},"generated":{"line":1,"column":1548}},{"source":"lib/activate.js","original":{"line":30,"column":15},"generated":{"line":1,"column":1551}},{"source":"lib/activate.js","name":"active","original":{"line":32,"column":6},"generated":{"line":1,"column":1552}},{"source":"lib/activate.js","name":"acc","original":{"line":33,"column":9},"generated":{"line":1,"column":1561}},{"source":"lib/activate.js","name":"find","original":{"line":33,"column":13},"generated":{"line":1,"column":1563}},{"source":"lib/activate.js","original":{"line":33,"column":18},"generated":{"line":1,"column":1569}},{"source":"lib/activate.js","original":{"line":33,"column":27},"generated":{"line":1,"column":1571}},{"source":"lib/activate.js","original":{"line":33,"column":27},"generated":{"line":1,"column":1573}},{"source":"lib/activate.js","original":{"line":33,"column":27},"generated":{"line":1,"column":1583}},{"source":"lib/activate.js","name":"isClicked","original":{"line":33,"column":41},"generated":{"line":1,"column":1596}},{"source":"lib/activate.js","name":"state","original":{"line":33,"column":51},"generated":{"line":1,"column":1598}},{"source":"lib/activate.js","name":"piece","original":{"line":33,"column":58},"generated":{"line":1,"column":1600}},{"source":"lib/activate.js","name":"e","original":{"line":33,"column":65},"generated":{"line":1,"column":1602}},{"source":"lib/activate.js","name":"getPiecePos","original":{"line":34,"column":12},"generated":{"line":1,"column":1607}},{"source":"lib/activate.js","name":"state","original":{"line":34,"column":24},"generated":{"line":1,"column":1609}},{"source":"lib/activate.js","name":"piece","original":{"line":34,"column":31},"generated":{"line":1,"column":1611}},{"source":"lib/activate.js","name":"e","original":{"line":34,"column":38},"generated":{"line":1,"column":1613}},{"source":"lib/activate.js","original":{"line":38,"column":4},"generated":{"line":1,"column":1621}},{"source":"lib/activate.js","original":{"line":38,"column":15},"generated":{"line":1,"column":1623}},{"source":"lib/activate.js","original":{"line":38,"column":15},"generated":{"line":1,"column":1625}},{"source":"lib/activate.js","original":{"line":38,"column":15},"generated":{"line":1,"column":1637}},{"source":"lib/activate.js","name":"piece","original":{"line":38,"column":16},"generated":{"line":1,"column":1646}},{"source":"lib/activate.js","name":"i","original":{"line":38,"column":23},"generated":{"line":1,"column":1648}},{"source":"lib/activate.js","name":"arr","original":{"line":38,"column":26},"generated":{"line":1,"column":1650}},{"source":"lib/activate.js","name":"piece","original":{"line":39,"column":9},"generated":{"line":1,"column":1653}},{"source":"lib/activate.js","name":"piece","original":{"line":39,"column":9},"generated":{"line":1,"column":1660}},{"source":"lib/activate.js","name":"piece","original":{"line":39,"column":9},"generated":{"line":1,"column":1662}},{"source":"lib/activate.js","name":"piece","original":{"line":39,"column":9},"generated":{"line":1,"column":1664}},{"source":"lib/activate.js","name":"piece","original":{"line":39,"column":9},"generated":{"line":1,"column":1667}},{"source":"lib/activate.js","original":{"line":38,"column":15},"generated":{"line":1,"column":1670}},{"source":"lib/activate.js","original":{"line":38,"column":15},"generated":{"line":1,"column":1673}},{"source":"lib/activate.js","name":"active","original":{"line":41,"column":6},"generated":{"line":1,"column":1674}},{"source":"lib/activate.js","name":"arr","original":{"line":41,"column":14},"generated":{"line":1,"column":1681}},{"source":"lib/activate.js","name":"find","original":{"line":41,"column":18},"generated":{"line":1,"column":1683}},{"source":"lib/activate.js","original":{"line":41,"column":23},"generated":{"line":1,"column":1688}},{"source":"lib/activate.js","name":"p","original":{"line":41,"column":24},"generated":{"line":1,"column":1697}},{"source":"lib/activate.js","name":"p","original":{"line":41,"column":30},"generated":{"line":1,"column":1700}},{"source":"lib/activate.js","name":"p","original":{"line":41,"column":30},"generated":{"line":1,"column":1707}},{"source":"lib/activate.js","name":"active","original":{"line":41,"column":32},"generated":{"line":1,"column":1709}},{"source":"lib/activate.js","name":"p","original":{"line":41,"column":42},"generated":{"line":1,"column":1717}},{"source":"lib/activate.js","name":"connections","original":{"line":41,"column":44},"generated":{"line":1,"column":1719}},{"source":"lib/activate.js","name":"includes","original":{"line":41,"column":56},"generated":{"line":1,"column":1731}},{"source":"lib/activate.js","name":"piece","original":{"line":41,"column":65},"generated":{"line":1,"column":1740}},{"source":"lib/activate.js","name":"id","original":{"line":41,"column":71},"generated":{"line":1,"column":1742}},{"source":"lib/activate.js","name":"getPiecePos","original":{"line":42,"column":10},"generated":{"line":1,"column":1748}},{"source":"lib/activate.js","name":"state","original":{"line":42,"column":22},"generated":{"line":1,"column":1750}},{"source":"lib/activate.js","name":"piece","original":{"line":42,"column":29},"generated":{"line":1,"column":1752}},{"source":"lib/activate.js","name":"e","original":{"line":42,"column":36},"generated":{"line":1,"column":1754}},{"source":"lib/activate.js","name":"arr","original":{"line":44,"column":9},"generated":{"line":1,"column":1758}},{"source":"lib/activate.js","name":"find","original":{"line":44,"column":13},"generated":{"line":1,"column":1760}},{"source":"lib/activate.js","original":{"line":44,"column":18},"generated":{"line":1,"column":1766}},{"source":"lib/activate.js","original":{"line":44,"column":27},"generated":{"line":1,"column":1768}},{"source":"lib/activate.js","original":{"line":44,"column":27},"generated":{"line":1,"column":1770}},{"source":"lib/activate.js","original":{"line":44,"column":27},"generated":{"line":1,"column":1780}},{"source":"lib/activate.js","name":"state","original":{"line":44,"column":41},"generated":{"line":1,"column":1792}},{"source":"lib/activate.js","name":"puzzle","original":{"line":44,"column":47},"generated":{"line":1,"column":1794}},{"source":"lib/activate.js","name":"draggable","original":{"line":44,"column":54},"generated":{"line":1,"column":1801}},{"source":"lib/activate.js","name":"getPiecePos","original":{"line":45,"column":10},"generated":{"line":1,"column":1811}},{"source":"lib/activate.js","name":"state","original":{"line":45,"column":22},"generated":{"line":1,"column":1813}},{"source":"lib/activate.js","name":"piece","original":{"line":45,"column":29},"generated":{"line":1,"column":1815}},{"source":"lib/activate.js","name":"e","original":{"line":45,"column":36},"generated":{"line":1,"column":1817}},{"source":"lib/activate.js","name":"piece","original":{"line":46,"column":10},"generated":{"line":1,"column":1820}},{"source":"lib/activate.js","name":"active","original":{"line":46,"column":16},"generated":{"line":1,"column":1822}},{"source":"lib/activate.js","original":{"line":51,"column":10},"generated":{"line":1,"column":1834}},{"source":"lib/activate.js","original":{"line":51,"column":10},"generated":{"line":1,"column":1836}},{"source":"lib/activate.js","original":{"line":51,"column":10},"generated":{"line":1,"column":1838}},{"source":"lib/activate.js","original":{"line":51,"column":10},"generated":{"line":1,"column":1846}},{"source":"lib/activate.js","name":"activeLast","original":{"line":51,"column":15},"generated":{"line":1,"column":1848}},{"source":"lib/activate.js","name":"activeLast","original":{"line":51,"column":15},"generated":{"line":1,"column":1850}},{"source":"lib/activate.js","name":"activeLast","original":{"line":51,"column":15},"generated":{"line":1,"column":1856}},{"source":"lib/activate.js","original":{"line":51,"column":10},"generated":{"line":1,"column":1858}},{"source":"lib/activate.js","original":{"line":51,"column":10},"generated":{"line":1,"column":1870}},{"source":"lib/activate.js","original":{"line":52,"column":6},"generated":{"line":1,"column":1871}},{"source":"lib/activate.js","name":"ps","original":{"line":52,"column":7},"generated":{"line":1,"column":1880}},{"source":"lib/activate.js","original":{"line":53,"column":8},"generated":{"line":1,"column":1883}},{"source":"lib/activate.js","name":"state","original":{"line":53,"column":9},"generated":{"line":1,"column":1890}},{"source":"lib/activate.js","name":"puzzle","original":{"line":53,"column":15},"generated":{"line":1,"column":1892}},{"source":"lib/activate.js","name":"done","original":{"line":53,"column":22},"generated":{"line":1,"column":1899}},{"source":"lib/activate.js","name":"ps","original":{"line":54,"column":8},"generated":{"line":1,"column":1905}},{"source":"lib/activate.js","name":"filter","original":{"line":54,"column":11},"generated":{"line":1,"column":1907}},{"source":"lib/activate.js","original":{"line":54,"column":18},"generated":{"line":1,"column":1914}},{"source":"lib/activate.js","name":"p","original":{"line":54,"column":19},"generated":{"line":1,"column":1923}},{"source":"lib/activate.js","name":"p","original":{"line":54,"column":25},"generated":{"line":1,"column":1926}},{"source":"lib/activate.js","name":"p","original":{"line":54,"column":25},"generated":{"line":1,"column":1933}},{"source":"lib/activate.js","name":"active","original":{"line":54,"column":27},"generated":{"line":1,"column":1935}},{"source":"lib/activate.js","name":"length","original":{"line":54,"column":35},"generated":{"line":1,"column":1944}},{"source":"lib/activate.js","name":"state","original":{"line":54,"column":46},"generated":{"line":1,"column":1953}},{"source":"lib/activate.js","name":"pieces","original":{"line":54,"column":52},"generated":{"line":1,"column":1955}},{"source":"lib/activate.js","name":"length","original":{"line":54,"column":59},"generated":{"line":1,"column":1962}},{"source":"lib/activate.js","original":{"line":28,"column":10},"generated":{"line":1,"column":1971}},{"source":"lib/activate.js","name":"state","original":{"line":56,"column":4},"generated":{"line":1,"column":1972}},{"source":"lib/activate.js","name":"pieces","original":{"line":56,"column":10},"generated":{"line":1,"column":1974}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":1986}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":1994}},{"source":"lib/activate.js","original":{"line":26,"column":7},"generated":{"line":1,"column":2003}}],"sources":{"lib/activate.js":"import { activeLast, mapReverse, sort, map } from \"./../utils/array-helpers.js\";\nimport { isTruthy } from \"./../utils/object-helpers.js\";\nimport { runIf } from \"./../utils/run-if.js\";\nimport { pipe } from \"./../utils/pipe.js\";\nimport { tap } from \"./../utils/tap.js\";\n\nconst isWithinX = (state, piece, e) =>\n  (e.clientX - state.canvas.pos.x) * state.canvas.DPI >= piece.curPos.x &&\n  (e.clientX - state.canvas.pos.x) * state.canvas.DPI <=\n    piece.curPos.x + piece.width;\n\nconst isWithinY = (state, piece, e) =>\n  (e.clientY - state.canvas.pos.y) * state.canvas.DPI >= piece.curPos.y &&\n  (e.clientY - state.canvas.pos.y) * state.canvas.DPI <=\n    piece.curPos.y + piece.height;\n\nconst isClicked = (state, piece, e) =>\n  isWithinX(state, piece, e) && isWithinY(state, piece, e);\n\nconst getPiecePos = (state, piece, e) => ({\n  x: (e.clientX - state.canvas.pos.x) * state.canvas.DPI - piece.curPos.x,\n  y: (e.clientY - state.canvas.pos.y) * state.canvas.DPI - piece.curPos.y,\n});\n\n// pieces gets painted bottom to top, we need to check in reverse order\nexport const activate = (e) => (state) => ({\n  ...state,\n  pieces: pipe(\n    // activate clicked piece (first occurence)\n    mapReverse((piece, i, arr, acc) => ({\n      ...piece,\n      active:\n        !acc.find(isTruthy(\"active\")) && isClicked(state, piece, e)\n          ? getPiecePos(state, piece, e)\n          : false,\n    })),\n\n    mapReverse((piece, i, arr) => ({\n      ...piece,\n      // activate the active piece's connections\n      active: arr.find((p) => p.active && p.connections.includes(piece.id))\n        ? getPiecePos(state, piece, e)\n        : // activate all pieces if none was clicked (and puzzle is draggable)\n        !arr.find(isTruthy(\"active\")) && state.puzzle.draggable\n        ? getPiecePos(state, piece, e)\n        : piece.active,\n    })),\n\n    // put the active piece(s) on top\n    // if puzzle isn't done or not all pieces are active (puzzle dragged)\n    runIf(sort(activeLast))(\n      (ps) =>\n        !state.puzzle.done &&\n        ps.filter((p) => p.active).length !== state.pieces.length\n    )\n  )(state.pieces),\n});\n"},"lineCount":null}},"error":null,"hash":"f366d75b7bb1a99c4be9d11091e67c52","cacheData":{"env":{}}}